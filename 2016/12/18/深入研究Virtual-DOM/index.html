<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <meta name="google-site-verification" content="M-1mI11XAlhv4V1duQd9whutIsulhvNLAi9CWNPiM0M" />
  <title>æ·±å…¥ç ”ç©¶Virtual DOM | é£å›å­çš„åšå®¢</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="å¯¹Virtual DOMè¿™ä¸ªåè¯å¹¶ä¸é™Œç”Ÿï¼Œä½†æ˜¯æœ‰ä»€ä¹ˆæ·±å…¥çš„ç†è§£è°ˆä¸ä¸Šã€‚çœ‹åˆ°mediumä¸Šrajaraodvå†™çš„The Inner Workings Of Virtual DOMè¿™ç¯‡æ–‡ç« ï¼Œæ¯”è¾ƒæ·±å…¥çš„ä»‹ç»äº†Virtual DOMçš„å„ä¸ªæ–¹é¢ï¼Œåœ¨æ­¤ç¿»è¯‘ä¸€ä¸‹ã€‚
è¿™ç¯‡æ–‡ç« æ¯”è¾ƒç®€å•ï¼Œåœ¨ç¿»è¯‘çš„è¿‡ç¨‹ä¸­éƒ½ä¸éœ€è¦googleç¿»è¯‘ï¼Œä½†æ˜¯å›¾ç‰‡æ¯”è¾ƒå¤šã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="æ·±å…¥ç ”ç©¶Virtual DOM">
<meta property="og:url" content="http://www.lixuejiang.me/2016/12/18/æ·±å…¥ç ”ç©¶Virtual-DOM/index.html">
<meta property="og:site_name" content="é£å›å­çš„åšå®¢">
<meta property="og:description" content="å¯¹Virtual DOMè¿™ä¸ªåè¯å¹¶ä¸é™Œç”Ÿï¼Œä½†æ˜¯æœ‰ä»€ä¹ˆæ·±å…¥çš„ç†è§£è°ˆä¸ä¸Šã€‚çœ‹åˆ°mediumä¸Šrajaraodvå†™çš„The Inner Workings Of Virtual DOMè¿™ç¯‡æ–‡ç« ï¼Œæ¯”è¾ƒæ·±å…¥çš„ä»‹ç»äº†Virtual DOMçš„å„ä¸ªæ–¹é¢ï¼Œåœ¨æ­¤ç¿»è¯‘ä¸€ä¸‹ã€‚
è¿™ç¯‡æ–‡ç« æ¯”è¾ƒç®€å•ï¼Œåœ¨ç¿»è¯‘çš„è¿‡ç¨‹ä¸­éƒ½ä¸éœ€è¦googleç¿»è¯‘ï¼Œä½†æ˜¯å›¾ç‰‡æ¯”è¾ƒå¤šã€‚">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-TF0TZszVwpYc1Pba7Dbk7Q.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/2016-12-18%2010:29:53.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-imVzO1P2k1cIuf04_rGYGw.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-KExHlJcp3om5h1JFA09Ahw.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-uOSYO2xCEcuGWNzKNjKUnA.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-zUYkQpIdUdPp_SIOnEX8Bg.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-Xc92YmYZeaJ6oX0PCGYfyw.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-TC2uwjc4mBrVHzOd0AeShw.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-TF0TZszVwpYc1Pba7Dbk7Q.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-JVwKJe82S1wHFqzr17DQ4g.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-CI75nMf-7j4ldxPJQ8nciQ.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-X1tcv3n47OuAExoTBu3Q5A.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-l-FmgMheFRYFuhCJQA4gcQ.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-XadPNReNXRQyIl6FJOpPlQ.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-iLQQTuRdKIhlsh5Vgaox0w.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-uyA28eM-UBnU0SSX8vPSdg.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-XadPNReNXRQyIl6FJOpPlQ.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-PbgdX1qNPoHh5Ok3yY83gQ.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-Pwkyw7P2bbpEL9zQB1YaMA.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-e6rihM5IE3PRedd311iinA.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-xRspRlx0WM-y2Au0zyegog.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-AyQmTTZFnfC_VKv23D8FrA.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-pCYNGbZL_zT1gbMtXYVt9A.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-JjV4E5Ag9ogDvH9ILWDO2Q.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-fHYrhlaGOJKnWTzn0YrQ8g.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-ALjitFLcW_lIHvaswCp0GA.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-m74VaQdTuuonA_R-LkT3xw.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-Ki5tKGKiRI4P_ma_fz3chQ.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-5GheZk3dZ7st_mvBcWG4nw.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-yZ3TSnTRf95mGSoR-HiwHw.png">
<meta property="og:image" content="http://ggbond.qiniudn.com/1-QGGL_W7zEr3FtR1VODXt_w.png">
<meta property="og:updated_time" content="2017-01-02T02:11:10.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æ·±å…¥ç ”ç©¶Virtual DOM">
<meta name="twitter:description" content="å¯¹Virtual DOMè¿™ä¸ªåè¯å¹¶ä¸é™Œç”Ÿï¼Œä½†æ˜¯æœ‰ä»€ä¹ˆæ·±å…¥çš„ç†è§£è°ˆä¸ä¸Šã€‚çœ‹åˆ°mediumä¸Šrajaraodvå†™çš„The Inner Workings Of Virtual DOMè¿™ç¯‡æ–‡ç« ï¼Œæ¯”è¾ƒæ·±å…¥çš„ä»‹ç»äº†Virtual DOMçš„å„ä¸ªæ–¹é¢ï¼Œåœ¨æ­¤ç¿»è¯‘ä¸€ä¸‹ã€‚
è¿™ç¯‡æ–‡ç« æ¯”è¾ƒç®€å•ï¼Œåœ¨ç¿»è¯‘çš„è¿‡ç¨‹ä¸­éƒ½ä¸éœ€è¦googleç¿»è¯‘ï¼Œä½†æ˜¯å›¾ç‰‡æ¯”è¾ƒå¤šã€‚">
<meta name="twitter:image" content="http://ggbond.qiniudn.com/1-TF0TZszVwpYc1Pba7Dbk7Q.png">
  
    <link rel="alternative" href="/atom.xml" title="é£å›å­çš„åšå®¢" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <script type='text/javascript'>
    var _vds = _vds || [];
    window._vds = _vds;
    (function(){
      _vds.push(['setAccountId', 'a99ca5e3ec989867']);
      (function() {
        var vds = document.createElement('script');
        vds.type='text/javascript';
        vds.async = true;
        vds.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'dn-growing.qbox.me/vds.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(vds, s);
      })();
    })();
  </script>
  <script type="text/javascript">
    (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
    })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
    
    _st('install','6xA7qjTvVsCCsqdVuDs6','2.0.0');
  </script>
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://ggbond.qiniudn.com/%E9%A3%8E.jpg" class="js-avatar show">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">é£å›å­</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
						<li>About</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">ä¸»é¡µ</a></li>
				        
							<li><a href="/archives">æ‰€æœ‰æ–‡ç« </a></li>
				        
							<li><a href="/about">å…³äº</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/lixuejiang" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/p/1005051991745641" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/li-xue-jiang" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/DOM/" style="font-size: 14px;">DOM</a> <a href="/tags/ES6/" style="font-size: 10px;">ES6</a> <a href="/tags/JavaScript/" style="font-size: 16px;">JavaScript</a> <a href="/tags/MVC/" style="font-size: 10px;">MVC</a> <a href="/tags/cookie/" style="font-size: 10px;">cookie</a> <a href="/tags/css/" style="font-size: 18px;">css</a> <a href="/tags/emmet/" style="font-size: 10px;">emmet</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/localStorage/" style="font-size: 10px;">localStorage</a> <a href="/tags/react/" style="font-size: 12px;">react</a> <a href="/tags/redux/" style="font-size: 10px;">redux</a> <a href="/tags/session/" style="font-size: 10px;">session</a> <a href="/tags/sessionStorage/" style="font-size: 10px;">sessionStorage</a> <a href="/tags/web/" style="font-size: 10px;">web</a> <a href="/tags/å‰ç«¯/" style="font-size: 10px;">å‰ç«¯</a> <a href="/tags/åŸåˆ›/" style="font-size: 10px;">åŸåˆ›</a> <a href="/tags/æ¡ˆä¾‹/" style="font-size: 10px;">æ¡ˆä¾‹</a> <a href="/tags/æ­£åˆ™/" style="font-size: 10px;">æ­£åˆ™</a> <a href="/tags/æµè§ˆå™¨å…¼å®¹æ€§/" style="font-size: 10px;">æµè§ˆå™¨å…¼å®¹æ€§</a> <a href="/tags/ç¿»è¯‘/" style="font-size: 20px;">ç¿»è¯‘</a> <a href="/tags/èŒä¸šå‘å±•/" style="font-size: 10px;">èŒä¸šå‘å±•</a> <a href="/tags/è¯»ä¹¦ç¬”è®°/" style="font-size: 18px;">è¯»ä¹¦ç¬”è®°</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.tboox.org/">tboox</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.cllgeek.com/">cllgeek</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://fangyi.me/">fangyi</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://greenmzc.github.io/">èŒ…å“¥</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://www.excaliburhan.com/">å°å¹³</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">é‡‘è¯šå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ</div>
				</section>
				
				<section class="switch-part switch-part5">
					<center>
						<embed src="https://www.cllgeek.com/hai/honehone_clock01.swf" type="application/x-shockwave-flash" width="260" height="100" align="middle" name="honehoneclock" autostart="true">
					</center>	
				</section>
			</div>

		</div>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">é£å›å­</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img lazy-src="http://ggbond.qiniudn.com/%E9%A3%8E.jpg" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">é£å›å­</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">ä¸»é¡µ</a></li>
		        
					<li><a href="/archives">æ‰€æœ‰æ–‡ç« </a></li>
		        
					<li><a href="/about">å…³äº</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/lixuejiang" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/p/1005051991745641" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/li-xue-jiang" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-æ·±å…¥ç ”ç©¶Virtual-DOM" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/18/æ·±å…¥ç ”ç©¶Virtual-DOM/" class="article-date">
  	<time datetime="2016-12-18T02:10:12.000Z" itemprop="datePublished">2016-12-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      æ·±å…¥ç ”ç©¶Virtual DOM
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DOM/">DOM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ç¿»è¯‘/">ç¿»è¯‘</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>å¯¹Virtual DOMè¿™ä¸ªåè¯å¹¶ä¸é™Œç”Ÿï¼Œä½†æ˜¯æœ‰ä»€ä¹ˆæ·±å…¥çš„ç†è§£è°ˆä¸ä¸Šã€‚çœ‹åˆ°mediumä¸Šrajaraodvå†™çš„<a href="https://medium.com/@rajaraodv/the-inner-workings-of-virtual-dom-666ee7ad47cf#.o9t0ifnaf" target="_blank" rel="external">The Inner Workings Of Virtual DOM</a>è¿™ç¯‡æ–‡ç« ï¼Œæ¯”è¾ƒæ·±å…¥çš„ä»‹ç»äº†Virtual DOMçš„å„ä¸ªæ–¹é¢ï¼Œåœ¨æ­¤ç¿»è¯‘ä¸€ä¸‹ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æ¯”è¾ƒç®€å•ï¼Œåœ¨ç¿»è¯‘çš„è¿‡ç¨‹ä¸­éƒ½ä¸éœ€è¦googleç¿»è¯‘ï¼Œä½†æ˜¯å›¾ç‰‡æ¯”è¾ƒå¤šã€‚</p>
<a id="more"></a>
<p><img src="http://ggbond.qiniudn.com/1-TF0TZszVwpYc1Pba7Dbk7Q.png" alt="http://ggbond.qiniudn.com/1-TF0TZszVwpYc1Pba7Dbk7Q.png"></p>
<p>Virtual DOM (VDOM ä¹Ÿå« VNode) å¾ˆé­”å¹» âœ¨ï¼Œä½†æ˜¯ä¹Ÿå¾ˆå¤æ‚ä»¥è‡³äºè®©äººéš¾ä»¥ç†è§£ğŸ˜±ã€‚åƒReactï¼ŒPreactè¿™äº›jsçš„åº“éƒ½ç”¨åˆ°äº†Virtual DOMã€‚ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘æ²¡æœ‰æ‰¾åˆ°ä»»ä½•ä¸€ç¯‡æ·±å…¥æµ…å‡ºçš„è§£é‡ŠVDOMæ–‡ç« æˆ–è€…æ–‡æ¡£ï¼Œæ‰€ä»¥æˆ‘å†³å®šè‡ªå·±å†™ä¸€ç¯‡ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šè¿™ç¯‡æ–‡ç« å¾ˆé•¿ï¼Œä¸ºäº†æ›´é€šä¿—æ˜“æ‡‚ï¼Œæˆ‘åŠ äº†å¾ˆå¤šå›¾ç‰‡ï¼ŒåŒæ—¶ä¹Ÿä½¿è¿™ä¹Ÿæ˜¯è¿™ç¯‡æ–‡ç« å¾ˆé•¿ã€‚</p>
<p> æˆ‘ç”¨äº†Preactçš„ä»£ç ï¼Œå¸Œæœ›å°†æ¥ä½ å¾ˆå®¹æ˜“çœ‹æ‡‚ï¼Œä½†æ˜¯æˆ‘è§‰å¾—å¤§å¤šæ•°æƒ…å†µä¸‹ä¹Ÿé€‚ç”¨äºReactã€‚æˆ‘å¸Œæœ›è¯»åˆ°è¿™ç¯‡æ–‡ç« çš„äººèƒ½æ›´å¥½çš„ç†è§£Reactå’ŒPreactï¼Œä¹Ÿä¸ºä»–ä»¬çš„å‘å±•åšå‡ºä¸€ç‚¹è´¡çŒ®</p>
</blockquote>
<p>æœ¬æ–‡ä¼šä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œç„¶åä»‹ç»ä¸åŒçš„åœºæ™¯ï¼Œè®©ä½ ç†è§£ä»–ä»¬æ˜¯æ€ä¹ˆæ ·è¿è¡Œçš„ï¼š</p>
<ol>
<li>Babel å’Œ JSX</li>
<li>åˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹-åªæ˜¯ä¸€ä¸ªå•ä¸€çš„è™šæ‹ŸDOMå…ƒç´ </li>
<li>å¤„ç†ç»„ä»¶å’Œå­ç»„ä»¶</li>
<li>åˆå§‹æ¸²æŸ“å’Œåˆ›å»ºDOMå…ƒç´ </li>
<li>é‡æ–°æ¸²æŸ“</li>
<li>åˆ æ‰DOMå…ƒç´ </li>
<li>æ›¿æ¢DOMå…ƒç´ </li>
</ol>
<h1 id="App"><a href="#App" class="headerlink" title="App"></a>App</h1><p>è¿™ä¸ªAppæ˜¯ä¸€ä¸ªç®€å•çš„<a href="http://codepen.io/rajaraodv/pen/BQxmjj" target="_blank" rel="external">å¯è¿‡æ»¤æœç´¢å™¨</a>ã€‚åŒ…å«â€œFilteredListâ€å’Œâ€œListâ€ä¸¤ä¸ªç»„ä»¶ã€‚Listç»„ä»¶æ¸²æŸ“äº†ä¸€ä¸ªåˆ—è¡¨ï¼ˆé»˜è®¤å€¼æ˜¯â€œCaliforniaâ€å’Œâ€œNew Yorkâ€ï¼‰ã€‚Appè¿˜æœ‰ä¸€ä¸ªæœç´¢æ¡†ï¼Œé€šè¿‡åœ¨æœç´¢æ¡†é‡Œè¾“å…¥æ–‡å­—æ¥è¿‡æ»¤åˆ—è¡¨ã€‚</p>
<p><img src="http://ggbond.qiniudn.com/2016-12-18%2010:29:53.png" alt="http://ggbond.qiniudn.com/2016-12-18%2010:29:53.png"></p>
<h1 id="å¤§å›¾"><a href="#å¤§å›¾" class="headerlink" title="å¤§å›¾"></a>å¤§å›¾</h1><p>é¦–å…ˆï¼Œæˆ‘ä»¬ç”¨JSXæ¥å†™ç»„ä»¶ï¼Œç„¶åç”¨Babelçš„CLIå·¥å…·è½¬æˆçº¯JSã€‚ç„¶åç”¨Preactçš„<a href="https://github.com/dominictarr/hyperscript" target="_blank" rel="external">â€œhâ€ (hyperscript)å‡½æ•°</a>è½¬æˆVDOMæ ‘ã€‚æœ€ç»ˆPreactçš„Virtual DOMç®—æ³•æŠŠVDOMè½¬æ¢æˆçœŸæ­£çš„DOMï¼Œè¿™æ ·å°±ç”Ÿæˆäº†æˆ‘ä»¬çš„Appã€‚</p>
<p><img src="http://ggbond.qiniudn.com/1-imVzO1P2k1cIuf04_rGYGw.png" alt="http://ggbond.qiniudn.com/1-imVzO1P2k1cIuf04_rGYGw.png"></p>
<p>åœ¨äº†è§£VDOMçš„ç”Ÿå‘½å‘¨æœŸä¹‹å‰ï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹JSX.</p>
<h2 id="Babelå’ŒJSX"><a href="#Babelå’ŒJSX" class="headerlink" title="Babelå’ŒJSX"></a>Babelå’ŒJSX</h2><p>åœ¨Reactå’ŒPreactè¿™äº›åº“é‡Œï¼Œæ²¡æœ‰htmlï¼Œåªæœ‰JavaScriptã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨JavaScripté‡Œå†™htmlï¼Œä½†æ˜¯åœ¨çº¯jsé‡Œå†™DOMç®€ç›´æ˜¯å™©æ¢¦ğŸ˜±</p>
<p>å¯¹æˆ‘ä»¬çš„Appæ¥è¯´ï¼Œhtmlåƒä¸‹é¢è¿™æ ·</p>
<p><img src="http://ggbond.qiniudn.com/1-KExHlJcp3om5h1JFA09Ahw.png" alt="http://ggbond.qiniudn.com/1-KExHlJcp3om5h1JFA09Ahw.png"><br><img src="http://ggbond.qiniudn.com/1-uOSYO2xCEcuGWNzKNjKUnA.png" alt="http://ggbond.qiniudn.com/1-uOSYO2xCEcuGWNzKNjKUnA.png"></p>
<p>è¿™å°±æ˜¯jsxï¼Œå…è®¸ä½ åœ¨JavaScripté‡Œå†™htmlï¼Œç„¶åä¹Ÿå¯ä»¥åœ¨{}é‡Œä½¿ç”¨JavaScriptã€‚</p>
<p>ç”¨jsxå†™ç»„ä»¶å°±å¾ˆå®¹æ˜“ï¼š</p>
<p><img src="http://ggbond.qiniudn.com/1-zUYkQpIdUdPp_SIOnEX8Bg.png" alt="http://ggbond.qiniudn.com/1-zUYkQpIdUdPp_SIOnEX8Bg.png"></p>
<p><img src="http://ggbond.qiniudn.com/1-Xc92YmYZeaJ6oX0PCGYfyw.png" alt="http://ggbond.qiniudn.com/1-Xc92YmYZeaJ6oX0PCGYfyw.png"></p>
<h2 id="æŠŠjsxè½¬æ¢æˆJavaScript"><a href="#æŠŠjsxè½¬æ¢æˆJavaScript" class="headerlink" title="æŠŠjsxè½¬æ¢æˆJavaScript"></a>æŠŠjsxè½¬æ¢æˆJavaScript</h2><p>jsxå¾ˆé…·ï¼Œä½†æ˜¯ä¸æ˜¯æœ‰æ•ˆçš„JSï¼Œæµè§ˆå™¨ä¸æ”¯æŒã€‚æˆ‘ä»¬éœ€è¦çš„æ˜¯çœŸå®çš„DOMã€‚JSXä»…ä»…æ˜¯åœ¨å†™DOMçš„è¡¨ç°å±‚çš„æ—¶å€™æœ‰ç”¨ã€‚<br>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‡½æ•°æ¥æŠŠjsxè½¬æ¢æˆç›¸åº”çš„JSONå¯¹è±¡ï¼ˆVDOM,ä¹Ÿæ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼‰ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªjsonå¯¹è±¡ä½œä¸ºåˆ›å»ºçœŸå®DOMçš„è¾“å…¥ã€‚</p>
<p>è¿™ä¸ªå‡½æ•°å°±å«hï¼Œå’ŒReacté‡Œçš„<a href="https://facebook.github.io/react/docs/react-api.html#createelement" target="_blank" rel="external">React.createElement</a>æ˜¯ä¸€æ ·çš„åŠŸèƒ½ã€‚</p>
<blockquote>
<p>â€œhâ€ ä»£è¡¨hyperscript</p>
</blockquote>
<p>æ€ä¹ˆæ ·æŠŠjsxè½¬æ¢æˆhå‡½æ•°å‘¢ï¼Œè¿™å°±æ˜¯Babelå¹²çš„äº‹æƒ…ã€‚Babeléå†æ¯ä¸€ä¸ªJSXèŠ‚ç‚¹ï¼ŒæŠŠä»–ä»¬è½¬æ¢æˆhå‡½æ•°çš„è°ƒç”¨</p>
<p><img src="http://ggbond.qiniudn.com/1-TC2uwjc4mBrVHzOd0AeShw.png" alt="å›¾ç‰‡"></p>
<h2 id="Babel-JSX-React-Vs-Preact"><a href="#Babel-JSX-React-Vs-Preact" class="headerlink" title="Babel JSX (React Vs Preact)"></a>Babel JSX (React Vs Preact)</h2><p>Babelé»˜è®¤ä¼šæŠŠjsxè½¬æˆReact.createElementè°ƒç”¨ï¼Œå› ä¸ºé»˜è®¤æ˜¯Reactã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬ä¹Ÿèƒ½é€šè¿‡æ·»åŠ <a href="https://babeljs.io/docs/plugins/transform-react-jsx/" target="_blank" rel="external">Babelç¼–è¯‘å®</a>ï¼ŒæŠŠè¿™ä¸ªå‡½æ•°çš„åå­—æ”¹æˆä»»ä½•æˆ‘ä»¬æƒ³è¦çš„åå­—ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Option 1:</div><div class="line">//.babelrc</div><div class="line">&#123;   &quot;plugins&quot;: [</div><div class="line">      [&quot;transform-react-jsx&quot;, &#123; &quot;pragma&quot;: &quot;h&quot; &#125;]</div><div class="line">     ] </div><div class="line">&#125;</div><div class="line">Option 2:</div><div class="line">//Add the below comment as the 1st line in every JSX file</div><div class="line">/** @jsx h */</div></pre></td></tr></table></figure>
<h2 id="æŒ‚è½½åˆ°çœŸå®çš„DOM"><a href="#æŒ‚è½½åˆ°çœŸå®çš„DOM" class="headerlink" title="æŒ‚è½½åˆ°çœŸå®çš„DOM"></a>æŒ‚è½½åˆ°çœŸå®çš„DOM</h2><p>starting mountå’Œrenderå‡½æ•°éƒ½è¢«è½¬æ¢åˆ°äº†hå‡½æ•°é‡Œï¼Œè¿™æ˜¯ä¸€åˆ‡çš„å¼€ç«¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">//Mount to real DOM</div><div class="line">render(&lt;FilteredList/&gt;, document.getElementById(â€˜appâ€™));</div><div class="line">//Converted to &quot;h&quot;:</div><div class="line">render(h(FilteredList), document.getElementById(â€˜appâ€™));</div></pre></td></tr></table></figure>
<h2 id="hå‡½æ•°çš„è¾“å‡º"><a href="#hå‡½æ•°çš„è¾“å‡º" class="headerlink" title="hå‡½æ•°çš„è¾“å‡º"></a>hå‡½æ•°çš„è¾“å‡º</h2><p>hå‡½æ•°æ¥æ”¶Babelè½¬æ¢åçš„JSXï¼Œåˆ›å»ºä¸€ä¸ªå«â€œVNodeâ€çš„èŠ‚ç‚¹ï¼ˆReacté€šè¿‡â€œcreateElementâ€åˆ›å»ºReactElementï¼‰ä¸€ä¸ªPreactçš„â€œVNodeâ€ï¼ˆæˆ–è€…æ˜¯Reactçš„â€œElementâ€ï¼‰å°±æ˜¯ä¸€ä¸ªåŒ…å«è‡ªèº«å±æ€§å’Œå­å…ƒç´ çš„DOMèŠ‚ç‚¹ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&#123;</div><div class="line">   &quot;nodeName&quot;: &quot;&quot;,</div><div class="line">   &quot;attributes&quot;: &#123;&#125;,</div><div class="line">   &quot;children&quot;: []</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸¾ä¸ªğŸŒ°ï¼Œæˆ‘ä»¬çš„Appçš„DOMèŠ‚ç‚¹çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&#123;</div><div class="line">   &quot;nodeName&quot;: &quot;input&quot;,</div><div class="line">   &quot;attributes&quot;: &#123;</div><div class="line">    &quot;type&quot;: &quot;text&quot;,</div><div class="line">    &quot;placeholder&quot;: &quot;Search&quot;,</div><div class="line">    &quot;onChange&quot;: &quot;&quot;</div><div class="line">   &#125;,</div><div class="line">   &quot;children&quot;: []</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šhå‡½æ•°å¹¶ä¸ä¼šåˆ›å»ºæ•´ä¸ªDOMæ ‘ï¼Œå¯¹äºæŒ‡å®šçš„èŠ‚ç‚¹ï¼Œåªåˆ›å»ºä¸€ä¸ªjsçš„å¯¹è±¡ï¼Œä½†æ˜¯å› ä¸ºrenderå‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªæ ‘å½¢çš„DOMï¼Œæœ€ç»ˆçš„VNodeçœ‹ä¸Šå»å°±åƒä¸€æ£µæ ‘</p>
<p>ç›¸å…³ä»£ç ï¼š<br>hï¼š<a href="https://github.com/developit/preact/blob/master/src/h.js" target="_blank" rel="external">https://github.com/developit/preact/blob/master/src/h.js</a><br>VNodeï¼š<a href="https://github.com/developit/preact/blob/master/src/vnode.js" target="_blank" rel="external">https://github.com/developit/preact/blob/master/src/vnode.js</a><br>renderï¼š<a href="https://github.com/developit/preact/blob/master/src/render.js" target="_blank" rel="external">https://github.com/developit/preact/blob/master/src/render.js</a><br>buildComponentFromVNodeï¼š<a href="https://github.com/developit/preact/blob/master/src/vdom/diff.js#L102" target="_blank" rel="external">https://github.com/developit/preact/blob/master/src/vdom/diff.js#L102</a></p>
</blockquote>
<h2 id="Preactçš„è™šæ‹ŸDOMç®—æ³•æµç¨‹å›¾"><a href="#Preactçš„è™šæ‹ŸDOMç®—æ³•æµç¨‹å›¾" class="headerlink" title="Preactçš„è™šæ‹ŸDOMç®—æ³•æµç¨‹å›¾"></a>Preactçš„è™šæ‹ŸDOMç®—æ³•æµç¨‹å›¾</h2><p>ä¸‹é¢çš„æµç¨‹å›¾ä»‹ç»äº†ç»„ä»¶å’Œå­ç»„ä»¶æ˜¯å¦‚ä½•åˆ›å»ºï¼Œæ›´æ–°å’Œåˆ é™¤çš„ã€‚ä¹Ÿå±•ç¤ºäº†åƒâ€œcomponentWillMountâ€è¿™æ ·çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯ä½•æ—¶è¢«è°ƒç”¨çš„</p>
<blockquote>
<p>æˆ‘ä»¬ä¼šä¸€æ­¥ä¸€æ­¥çš„æ¥åˆ†ææ¯ä¸€ä¸ªè¿‡ç¨‹ï¼Œæ‰€ä»¥ä¸è¦è§‰å¾—å¤ªå¤æ‚ã€‚</p>
</blockquote>
<p><img src="http://ggbond.qiniudn.com/1-TF0TZszVwpYc1Pba7Dbk7Q.png" alt="ç”Ÿå‘½å‘¨æœŸ"></p>
<p>è¦é©¬ä¸Šç†è§£ç¡®å®å¾ˆå›°éš¾ï¼Œè®©æˆ‘ä»¬æ ¹æ®ä¸åŒçš„åœºæ™¯æ¥ä¸€æ­¥æ­¥çœ‹ï¼š</p>
<blockquote>
<p>æˆ‘ä¼šç”¨é»„è‰²æ¥é«˜äº®ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„éƒ¨åˆ†ï¼š</p>
</blockquote>
<h3 id="åœºæ™¯1ï¼šåˆå§‹åˆ›å»ºApp"><a href="#åœºæ™¯1ï¼šåˆå§‹åˆ›å»ºApp" class="headerlink" title="åœºæ™¯1ï¼šåˆå§‹åˆ›å»ºApp"></a>åœºæ™¯1ï¼šåˆå§‹åˆ›å»ºApp</h3><h4 id="1-1ä¸ºæŒ‡å®šçš„ç»„ä»¶åˆ›å»ºVNodeï¼ˆVirutal-DOMï¼‰"><a href="#1-1ä¸ºæŒ‡å®šçš„ç»„ä»¶åˆ›å»ºVNodeï¼ˆVirutal-DOMï¼‰" class="headerlink" title="1.1ä¸ºæŒ‡å®šçš„ç»„ä»¶åˆ›å»ºVNodeï¼ˆVirutal DOMï¼‰"></a>1.1ä¸ºæŒ‡å®šçš„ç»„ä»¶åˆ›å»ºVNodeï¼ˆVirutal DOMï¼‰</h4><p>è¿™å¼ å›¾å±•ç¤ºäº†ä¸ºç»™å®šç»„ä»¶åˆ›å»ºVNodeæ ‘çš„åˆå§‹å¾ªç¯ï¼Œåœ¨è¿™ä¸ªå¾ªç¯é‡Œæ²¡æœ‰åˆ›å»ºå­ç»„ä»¶ï¼ˆåˆ›å»ºå­ç»„ä»¶çš„è¿‡ç¨‹ç•¥æœ‰ä¸åŒï¼‰</p>
<p><img src="http://ggbond.qiniudn.com/1-JVwKJe82S1wHFqzr17DQ4g.png" alt="VNODE"><br>ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†å½“æˆ‘ä»¬çš„Appç¬¬ä¸€æ¬¡è¿è¡Œçš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆï¼ŒPreactæœ€ç»ˆä¸ºFilteredListç»„ä»¶åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«å­ç»„ä»¶å’Œè‡ªèº«å±æ€§çš„VNode</p>
<p><img src="http://ggbond.qiniudn.com/1-CI75nMf-7j4ldxPJQ8nciQ.png" alt="å›¾"></p>
<p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªVNodeï¼Œå…¶ä¸­divæ˜¯å®ƒçš„çˆ¶èŠ‚ç‚¹ï¼Œinputå’ŒListæ˜¯å®ƒçš„å­èŠ‚ç‚¹</p>
<blockquote>
<p>ç›¸å…³ä»£ç ï¼š<br>å¤§å¤šæ•°ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š<a href="https://github.com/developit/preact/blob/master/src/vdom/component.js" target="_blank" rel="external">https://github.com/developit/preact/blob/master/src/vdom/component.js</a></p>
</blockquote>
<h4 id="1-2-å¦‚æœä¸æ˜¯ç»„ä»¶åˆ™åˆ›å»ºçœŸå®çš„DOM"><a href="#1-2-å¦‚æœä¸æ˜¯ç»„ä»¶åˆ™åˆ›å»ºçœŸå®çš„DOM" class="headerlink" title="1.2 å¦‚æœä¸æ˜¯ç»„ä»¶åˆ™åˆ›å»ºçœŸå®çš„DOM"></a>1.2 å¦‚æœä¸æ˜¯ç»„ä»¶åˆ™åˆ›å»ºçœŸå®çš„DOM</h4><p>è¿™ä¸€æ­¥ä¸»è¦æ˜¯åˆ›å»ºçˆ¶èŠ‚ç‚¹divï¼Œå¾ªç¯åˆ›å»ºå­èŠ‚ç‚¹</p>
<p><img src="http://ggbond.qiniudn.com/1-X1tcv3n47OuAExoTBu3Q5A.png" alt="http://ggbond.qiniudn.com/1-X1tcv3n47OuAExoTBu3Q5A.png"></p>
<p>divæ˜¾ç¤ºå¦‚ä¸‹ï¼š<br><img src="http://ggbond.qiniudn.com/1-l-FmgMheFRYFuhCJQA4gcQ.png" alt="http://ggbond.qiniudn.com/1-l-FmgMheFRYFuhCJQA4gcQ.png"></p>
<blockquote>
<p>ç›¸å…³ä»£ç ï¼š<br>document.createElement: <a href="https://github.com/developit/preact/blob/master/src/dom/recycler.js" target="_blank" rel="external">https://github.com/developit/preact/blob/master/src/dom/recycler.js</a></p>
</blockquote>
<h4 id="1-3-é‡å¤åˆ›å»ºå­èŠ‚ç‚¹"><a href="#1-3-é‡å¤åˆ›å»ºå­èŠ‚ç‚¹" class="headerlink" title="1.3 é‡å¤åˆ›å»ºå­èŠ‚ç‚¹"></a>1.3 é‡å¤åˆ›å»ºå­èŠ‚ç‚¹</h4><p>è¿™ä¸€æ­¥ï¼Œè¦å¾ªç¯åˆ›å»ºæ‰€æœ‰èŠ‚ç‚¹ï¼Œå¯¹æˆ‘ä»¬çš„Appæ¥è¯´ï¼Œå°±æ˜¯inputå’ŒList</p>
<p><img src="http://ggbond.qiniudn.com/1-XadPNReNXRQyIl6FJOpPlQ.png" alt="http://ggbond.qiniudn.com/1-XadPNReNXRQyIl6FJOpPlQ.png"></p>
<h4 id="1-4-æŠŠå­èŠ‚ç‚¹æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹"><a href="#1-4-æŠŠå­èŠ‚ç‚¹æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹" class="headerlink" title="1.4 æŠŠå­èŠ‚ç‚¹æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹"></a>1.4 æŠŠå­èŠ‚ç‚¹æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹</h4><p>è¿™ä¸€æ­¥å¤„ç†å¶å­èŠ‚ç‚¹ï¼Œå› ä¸ºinputæœ‰ä¸€ä¸ªdivçš„çˆ¶èŠ‚ç‚¹ï¼Œæˆ‘ä»¬æŠŠinputä½œä¸ºdivçš„å­èŠ‚ç‚¹ï¼Œç„¶å’Œåˆ›å»ºListï¼Œä¹Ÿå°±æ˜¯divçš„ç¬¬äºŒä¸ªå­èŠ‚ç‚¹</p>
<p><img src="http://ggbond.qiniudn.com/1-iLQQTuRdKIhlsh5Vgaox0w.png" alt="http://ggbond.qiniudn.com/1-iLQQTuRdKIhlsh5Vgaox0w.png"></p>
<p>åˆ°è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬çš„appçœ‹ä¸Šå»åƒè¿™æ ·ï¼š<br><img src="http://ggbond.qiniudn.com/1-uyA28eM-UBnU0SSX8vPSdg.png" alt="http://ggbond.qiniudn.com/1-uyA28eM-UBnU0SSX8vPSdg.png"></p>
<blockquote>
<p>æ³¨æ„ï¼šåˆ›å»ºå®Œinputä¹‹åå¹¶ä¸æ˜¯ç«‹å³å»åˆ›å»ºlistç»„ä»¶ï¼Œè€Œæ˜¯å…ˆæŠŠinputæ·»åŠ åˆ°çˆ¶divèŠ‚ç‚¹ä¹‹åæ‰ç»§ç»­å¤„ç†ListèŠ‚ç‚¹<br>ç›¸å…³ä»£ç ï¼š<br>appendChildï¼š<a href="https://github.com/developit/preact/blob/master/src/vdom/diff.js" target="_blank" rel="external">https://github.com/developit/preact/blob/master/src/vdom/diff.js</a></p>
</blockquote>
<h4 id="1-5-å¤„ç†å­ç»„ä»¶"><a href="#1-5-å¤„ç†å­ç»„ä»¶" class="headerlink" title="1.5 å¤„ç†å­ç»„ä»¶"></a>1.5 å¤„ç†å­ç»„ä»¶</h4><p>æ§åˆ¶æµåˆå›åˆ°1.1å¼€å§‹å¤„ç†Listç»„ä»¶ï¼Œå› ä¸ºListæ˜¯ä¸€ä¸ªç»„ä»¶è€Œä¸æ˜¯DOMå…ƒç´ ï¼Œä¼šè°ƒç”¨Listçš„renderå‡½æ•°ç”ŸæˆVNodes</p>
<p><img src="http://ggbond.qiniudn.com/1-XadPNReNXRQyIl6FJOpPlQ.png" alt="http://ggbond.qiniudn.com/1-XadPNReNXRQyIl6FJOpPlQ.png"></p>
<p>Listçš„è™šæ‹ŸèŠ‚ç‚¹çœ‹ä¸Šå»åƒä¸‹é¢è¿™æ ·ï¼š<br><img src="http://ggbond.qiniudn.com/1-PbgdX1qNPoHh5Ok3yY83gQ.png" alt="http://ggbond.qiniudn.com/1-PbgdX1qNPoHh5Ok3yY83gQ.png"></p>
<blockquote>
<p>ç›¸å…³ä»£ç ï¼š<br>buildComponentFromVNodeï¼š<a href="https://github.com/developit/preact/blob/master/src/vdom/diff.js#L102" target="_blank" rel="external">https://github.com/developit/preact/blob/master/src/vdom/diff.js#L102</a></p>
</blockquote>
<h4 id="1-6-é‡å¤1-1åˆ°1-4å¤„ç†æ‰€æœ‰çš„å­èŠ‚ç‚¹"><a href="#1-6-é‡å¤1-1åˆ°1-4å¤„ç†æ‰€æœ‰çš„å­èŠ‚ç‚¹" class="headerlink" title="1.6 é‡å¤1.1åˆ°1.4å¤„ç†æ‰€æœ‰çš„å­èŠ‚ç‚¹"></a>1.6 é‡å¤1.1åˆ°1.4å¤„ç†æ‰€æœ‰çš„å­èŠ‚ç‚¹</h4><p><img src="http://ggbond.qiniudn.com/1-Pwkyw7P2bbpEL9zQB1YaMA.png" alt="http://ggbond.qiniudn.com/1-Pwkyw7P2bbpEL9zQB1YaMA.png"></p>
<p>ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†æ¯ä¸ªèŠ‚ç‚¹è¢«æ·»åŠ çš„è¿‡ç¨‹ï¼ˆæ·±åº¦ä¼˜å…ˆï¼‰<br><img src="http://ggbond.qiniudn.com/1-e6rihM5IE3PRedd311iinA.png" alt="http://ggbond.qiniudn.com/1-e6rihM5IE3PRedd311iinA.png"></p>
<h4 id="1-7-ç»“æŸå¤„ç†"><a href="#1-7-ç»“æŸå¤„ç†" class="headerlink" title="1.7 ç»“æŸå¤„ç†"></a>1.7 ç»“æŸå¤„ç†</h4><p>è¿™ä¸€æ­¥å°±ç»“æŸäº†ï¼Œè°ƒç”¨æ‰€æœ‰ç»„ä»¶çš„â€œcomponentDidMountâ€å‡½æ•°ï¼Œç„¶åç»“æŸ</p>
<p><img src="http://ggbond.qiniudn.com/1-xRspRlx0WM-y2Au0zyegog.png" alt="http://ggbond.qiniudn.com/1-xRspRlx0WM-y2Au0zyegog.png"></p>
<blockquote>
<p>é‡è¦æç¤ºï¼šå½“è¿™äº›æ­¥éª¤å®Œæˆä»¥åï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰ä¸€ä¸ªå¯¹çœŸå®DOMçš„å¼•ç”¨ï¼Œç”¨æ¥æ›´æ–°å’Œæ¯”è¾ƒï¼Œé¿å…é‡æ–°åˆ›å»ºåŒæ ·çš„DOMèŠ‚ç‚¹ï¼š</p>
</blockquote>
<h3 id="åœºæ™¯2ï¼šåˆ é™¤å¶å­èŠ‚ç‚¹"><a href="#åœºæ™¯2ï¼šåˆ é™¤å¶å­èŠ‚ç‚¹" class="headerlink" title="åœºæ™¯2ï¼šåˆ é™¤å¶å­èŠ‚ç‚¹"></a>åœºæ™¯2ï¼šåˆ é™¤å¶å­èŠ‚ç‚¹</h3><p>å½“æˆ‘ä»¬åœ¨æœç´¢æ¡†é‡Œè¾“å…¥â€œcalâ€ï¼Œç„¶åæ•²ä¸‹å›è½¦ä¹‹åï¼Œå°±åªå‰©ä¸‹äº†(New York)è¿™ä¸ªå¶å­èŠ‚ç‚¹ï¼Œåˆ é™¤äº†Listçš„ç¬¬äºŒä¸ªèŠ‚ç‚¹</p>
<p><img src="http://ggbond.qiniudn.com/1-AyQmTTZFnfC_VKv23D8FrA.png" alt="http://ggbond.qiniudn.com/1-AyQmTTZFnfC_VKv23D8FrA.png"></p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªåœºæ™¯çš„æµç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼š</p>
<h4 id="2-1-åƒä¹‹å‰ä¸€æ ·ï¼Œåˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹"><a href="#2-1-åƒä¹‹å‰ä¸€æ ·ï¼Œåˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹" class="headerlink" title="2.1 åƒä¹‹å‰ä¸€æ ·ï¼Œåˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹"></a>2.1 åƒä¹‹å‰ä¸€æ ·ï¼Œåˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹</h4><p>åœ¨åˆå§‹åŒ–æ¸²æŸ“ä¹‹åï¼Œå°†æ¥çš„æ¯ä¸€æ¬¡æ›´æ”¹éƒ½æ˜¯updateã€‚å½“åˆ›å»ºèŠ‚ç‚¹çš„æ—¶å€™ï¼Œupdateçš„ç”Ÿå‘½å‘¨æœŸå’Œcreateçš„ç”Ÿå‘½å‘¨æœŸå¾ˆåƒã€‚ä¹Ÿä¼šä»å¤´åˆ›å»ºVNodes</p>
<p>ä½†æ˜¯å› ä¸ºæ˜¯æ›´æ–°è€Œä¸æ˜¯åˆ›å»ºç»„ä»¶ï¼Œä¼šè°ƒç”¨æ¯ä¸ªç»„ä»¶å’Œå­—ç»„ä»¶çš„â€œcomponentWillReceivePropsâ€, â€œshouldComponentUpdateâ€, and â€œcomponentWillUpdateâ€æ–¹æ³•</p>
<p>å¦å¤–åœ¨updateçš„å‘¨æœŸé‡Œï¼Œå¦‚æœVNodeså¯¹åº”çš„DOMå…ƒç´ å·²ç»å­˜åœ¨ï¼Œåˆ™ä¸ä¼šé‡æ–°åˆ›å»º</p>
<p><img src="http://ggbond.qiniudn.com/1-pCYNGbZL_zT1gbMtXYVt9A.png" alt="http://ggbond.qiniudn.com/1-pCYNGbZL_zT1gbMtXYVt9A.png"></p>
<blockquote>
<p>ç›¸å…³ä»£ç ï¼š<br>removeNodeï¼š<a href="https://github.com/developit/preact/blob/master/src/dom/index.js#L9" target="_blank" rel="external">https://github.com/developit/preact/blob/master/src/dom/index.js#L9</a><br>insertBeforeï¼š<a href="https://github.com/developit/preact/blob/master/src/vdom/diff.js#L253" target="_blank" rel="external">https://github.com/developit/preact/blob/master/src/vdom/diff.js#L253</a></p>
</blockquote>
<h4 id="2-2-ä½¿ç”¨ç»„ä»¶å¯¹çœŸå®DOMçš„å¼•ç”¨ï¼Œé¿å…é‡æ–°åˆ›å»ºDOM"><a href="#2-2-ä½¿ç”¨ç»„ä»¶å¯¹çœŸå®DOMçš„å¼•ç”¨ï¼Œé¿å…é‡æ–°åˆ›å»ºDOM" class="headerlink" title="2.2 ä½¿ç”¨ç»„ä»¶å¯¹çœŸå®DOMçš„å¼•ç”¨ï¼Œé¿å…é‡æ–°åˆ›å»ºDOM"></a>2.2 ä½¿ç”¨ç»„ä»¶å¯¹çœŸå®DOMçš„å¼•ç”¨ï¼Œé¿å…é‡æ–°åˆ›å»ºDOM</h4><p>åƒå…ˆå‰æåˆ°çš„ï¼Œæ¯ä¸€ä¸ªç»„ä»¶éƒ½æœ‰ä¸€ä¸ªå¯¹å…¶åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­åˆ›å»ºçš„çœŸå®DOMçš„ä¸€ä¸ªå¼•ç”¨ï¼Œä¸‹å›¾å±•ç¤ºäº†æˆ‘ä»¬çš„Appçš„å¼•ç”¨</p>
<p><img src="http://ggbond.qiniudn.com/1-JjV4E5Ag9ogDvH9ILWDO2Q.png" alt="http://ggbond.qiniudn.com/1-JjV4E5Ag9ogDvH9ILWDO2Q.png"><br>å½“è™šæ‹ŸèŠ‚ç‚¹åˆ›å»ºä¹‹åï¼ŒèŠ‚ç‚¹çš„æ¯ä¸€ä¸ªå±æ€§éƒ½ä¼šå’ŒçœŸå®DOMçš„èŠ‚ç‚¹å±æ€§æ¯”è¾ƒï¼Œå¦‚æœçœŸå®DOMæ˜¯å­˜åœ¨çš„ï¼Œåˆ™å¾ªç¯è·³åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</p>
<p><img src="http://ggbond.qiniudn.com/1-fHYrhlaGOJKnWTzn0YrQ8g.png" alt="http://ggbond.qiniudn.com/1-fHYrhlaGOJKnWTzn0YrQ8g.png"></p>
<blockquote>
<p>ç›¸å…³ä»£ç ï¼š<br>innerDiffNodeï¼š<a href="https://github.com/developit/preact/blob/master/src/vdom/diff.js#L185" target="_blank" rel="external">https://github.com/developit/preact/blob/master/src/vdom/diff.js#L185</a></p>
</blockquote>
<h4 id="2-3-å¦‚æœçœŸå®DOMé‡Œè¿˜æœ‰å…¶ä»–èŠ‚ç‚¹åˆ™åˆ é™¤"><a href="#2-3-å¦‚æœçœŸå®DOMé‡Œè¿˜æœ‰å…¶ä»–èŠ‚ç‚¹åˆ™åˆ é™¤" class="headerlink" title="2.3 å¦‚æœçœŸå®DOMé‡Œè¿˜æœ‰å…¶ä»–èŠ‚ç‚¹åˆ™åˆ é™¤"></a>2.3 å¦‚æœçœŸå®DOMé‡Œè¿˜æœ‰å…¶ä»–èŠ‚ç‚¹åˆ™åˆ é™¤</h4><p><img src="http://ggbond.qiniudn.com/1-ALjitFLcW_lIHvaswCp0GA.png" alt="http://ggbond.qiniudn.com/1-ALjitFLcW_lIHvaswCp0GA.png"></p>
<p>å› ä¸ºæœ‰å·®å¼‚ï¼Œâ€œNew Yorkâ€èŠ‚ç‚¹åœ¨çœŸå®DOMé‡Œè¢«ä¸‹é¢çš„æµç¨‹å±•ç¤ºçš„ç®—æ³•åˆ é™¤äº†ï¼Œè¯¥ç®—æ³•è¿˜ä¼šè°ƒç”¨â€œcomponentDidUpdateâ€ç”Ÿå‘½å‘¨æœŸå‡½æ•°</p>
<p><img src="http://ggbond.qiniudn.com/1-m74VaQdTuuonA_R-LkT3xw.png" alt="http://ggbond.qiniudn.com/1-m74VaQdTuuonA_R-LkT3xw.png"></p>
<h3 id="åœºæ™¯3ï¼šå¸è½½æ•´ä¸ªç»„ä»¶"><a href="#åœºæ™¯3ï¼šå¸è½½æ•´ä¸ªç»„ä»¶" class="headerlink" title="åœºæ™¯3ï¼šå¸è½½æ•´ä¸ªç»„ä»¶"></a>åœºæ™¯3ï¼šå¸è½½æ•´ä¸ªç»„ä»¶</h3><p>è€ƒè™‘è¿™æ ·ä¸€ç§ç”¨æˆ·åœºæ™¯ï¼šæˆ‘ä»¬åœ¨è¿‡æ»¤å™¨äº†è¾“å…¥blablaï¼Œå› ä¸ºå®ƒæ—¢ä¸åŒ¹é…â€œCaliforniaâ€ä¹Ÿä¸åŒ¹é…â€œNew Yorkâ€,æ‰€ä»¥ä¸éœ€è¦æ¸²æŸ“Listè¿™ä¸ªå­ç»„ä»¶ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬éœ€è¦å¸è½½æ•´ä¸ªç»„ä»¶</p>
<p><img src="http://ggbond.qiniudn.com/1-Ki5tKGKiRI4P_ma_fz3chQ.png" alt="http://ggbond.qiniudn.com/1-Ki5tKGKiRI4P_ma_fz3chQ.png"></p>
<p><img src="http://ggbond.qiniudn.com/1-5GheZk3dZ7st_mvBcWG4nw.png" alt="http://ggbond.qiniudn.com/1-5GheZk3dZ7st_mvBcWG4nw.png"><br>åˆ é™¤ä¸€ä¸ªç»„ä»¶å’Œåˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ç±»ä¼¼ã€‚å¦å¤–ï¼Œå½“åˆ é™¤ä¸€ä¸ªè¢«ç»„ä»¶å¼•ç”¨çš„èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ¡†æ¶ä¼šè°ƒç”¨â€œcomponentWillUnmountâ€å‡½æ•°ï¼Œç„¶åé€’å½’åˆ é™¤æ‰€æœ‰çš„DOMå…ƒç´ ã€‚<br>ä¸‹å›¾å±•ç¤ºäº†çœŸæ˜¯DOMé‡Œulå¯¹Listç»„ä»¶çš„å¼•ç”¨</p>
<p><img src="http://ggbond.qiniudn.com/1-yZ3TSnTRf95mGSoR-HiwHw.png" alt="http://ggbond.qiniudn.com/1-yZ3TSnTRf95mGSoR-HiwHw.png"></p>
<p>ä¸‹å›¾ä¸­é«˜äº®çš„éƒ¨åˆ†å±•ç¤ºäº†åˆ é™¤/å¸è½½ç»„ä»¶æ˜¯å¦‚ä½•å·¥ä½œçš„<br>The below picture highlights the section in the flowchart to show how deleting/unmounting a component works.</p>
<p><img src="http://ggbond.qiniudn.com/1-QGGL_W7zEr3FtR1VODXt_w.png" alt="http://ggbond.qiniudn.com/1-QGGL_W7zEr3FtR1VODXt_w.png"></p>
<blockquote>
<p>ç›¸å…³ä»£ç ï¼š<br>unmountComponentï¼š<a href="https://github.com/developit/preact/blob/master/src/vdom/component.js#L250" target="_blank" rel="external">https://github.com/developit/preact/blob/master/src/vdom/component.js#L250</a></p>
</blockquote>
<p>ã€Šå®Œã€‹</p>

      
    </div>
    
  </div>
  
    <div style="margin:30px;">è½¬è½½æ³¨æ˜å‡ºå¤„æˆ–è€…è”ç³»<a href="mailto:642898959@qq.com">ä½œè€…</a></div>
    
<nav id="article-nav">
  
    <a href="/2017/01/02/cssçš„font-familyä»€ä¹ˆæ—¶å€™éœ€è¦å¼•å·/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          CSSçš„font familyä»€ä¹ˆæ—¶å€™éœ€è¦å¼•å·
        
      </div>
    </a>
  
  
    <a href="/2016/12/04/ç”¨ES6ç”Ÿæˆå™¨è§£å†³nodeå›è°ƒåœ°ç‹±/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">ç”¨ES6ç”Ÿæˆå™¨è§£å†³nodeå›è°ƒåœ°ç‹±</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a> 
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- å¤šè¯´è¯„è®ºæ¡† start -->
	<div class="ds-thread" data-thread-key="æ·±å…¥ç ”ç©¶Virtual-DOM" data-title="æ·±å…¥ç ”ç©¶Virtual DOM" data-url="http://www.lixuejiang.me/2016/12/18/æ·±å…¥ç ”ç©¶Virtual-DOM/"></div>
	<!-- å¤šè¯´è¯„è®ºæ¡† end -->
	<!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) -->
	<link rel="stylesheet" href="/css/duoshuo-ua.css">

	<!-- ç¬¬1éƒ¨åˆ†ï¼šåœ¨embed.jsä¹‹å‰å®šä¹‰duoshuoQueryå’ŒåŠ è½½duoshuo-ua
	ä¸¤è€…é¡ºåºå¯ä»¥äº¤æ¢-->
	<script src="/js/duoshuo-ua.js"></script>
	<script>var duoshuoQuery={short_name:"xuejiangli",myIds:[9960671]};</script>

	<script type="text/javascript">
	var duoshuoQuery = {short_name:"xuejiangli"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- å¤šè¯´å…¬å…±JSä»£ç  end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 é£å›å­
    	</div>
      	<div class="footer-right">
			æœ¬ç«™æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"></span> æ¬¡, è®¿å®¢æ•° <span id="busuanzi_value_site_uv"></span> äººæ¬¡, æœ¬æ–‡æ€»é˜…è¯»é‡ <span id="busuanzi_value_page_pv"></span> æ¬¡
			<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true,
		root: ''
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div id="totop" style="position:fixed;bottom:50px;right:30px;cursor: pointer;z-index:5;">
	<a title="è¿”å›é¡¶éƒ¨"><img src="http://ggbond.qiniudn.com/5-120601155S7.gif"/></a>
</div>
<script src="/js/totop.js"></script>
    <a href="https://github.com/lixuejiang"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/82b228a3648bf44fc1163ef44c62fcc60081495e/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png"></a>
  </div>
</body>
</html>